mutate(emoji = paste0(emoji, ".png")) %>%
# mutate(image = readPNG(paste0(emoji, ".png"))) %>% head()
ggplot(aes(x = crop,
y = value)) +
# geom_image(aes(image = emoji)) +
geom_textured_col(aes(
image = emoji
), fill = NA, colour = NA) +
theme_void() +
facet_wrap(~SubCounty)
ggsave("testing.pdf")
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
# mutate(image = readPNG(paste0(emoji, ".png"))) %>% head()
ggplot(aes(x = crop,
y = value)) +
# geom_image(aes(image = emoji)) +
geom_textured_col(aes(
image = emoji
), fill = NA, colour = NA) +
theme_void() +
facet_wrap(~SubCounty, strip.position = "bottom") +
theme()
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
# mutate(image = readPNG(paste0(emoji, ".png"))) %>% head()
ggplot(aes(x = crop,
y = value)) +
# geom_image(aes(image = emoji)) +
geom_textured_col(aes(
image = emoji
), fill = NA, colour = NA) +
theme_void() +
facet_wrap(~SubCounty, strip.position = "bottom") +
theme(panel.border = element_line())
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
# mutate(image = readPNG(paste0(emoji, ".png"))) %>% head()
ggplot(aes(x = crop,
y = value)) +
# geom_image(aes(image = emoji)) +
geom_textured_col(aes(
image = emoji
), fill = NA, colour = NA) +
theme_void() +
facet_wrap(~SubCounty, strip.position = "bottom") +
theme(panel.border = element_line())
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
# mutate(image = readPNG(paste0(emoji, ".png"))) %>% head()
ggplot(aes(x = crop,
y = value)) +
# geom_image(aes(image = emoji)) +
geom_textured_col(aes(
image = emoji
), fill = NA, colour = NA) +
theme_void() +
facet_wrap(~SubCounty, strip.position = "bottom") +
theme(panel.border = element_rect())
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
# mutate(image = readPNG(paste0(emoji, ".png"))) %>% head()
ggplot(aes(x = crop,
y = value)) +
# geom_image(aes(image = emoji)) +
geom_textured_col(aes(
image = emoji
), fill = NA, colour = NA) +
theme_void() +
facet_wrap(~SubCounty, strip.position = "bottom") +
theme(panel.border = element_rect(fill = NA))
ggsave("testing.pdf")
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
# mutate(image = readPNG(paste0(emoji, ".png"))) %>% head()
ggplot(aes(x = crop,
y = value)) +
# geom_image(aes(image = emoji)) +
geom_textured_col(aes(
image = emoji
), fill = NA, colour = NA) +
theme_void() +
facet_wrap(~SubCounty, strip.position = "bottom") +
theme(panel.border = element_rect(fill = NA),
plot.margin = 3)
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
# mutate(image = readPNG(paste0(emoji, ".png"))) %>% head()
ggplot(aes(x = crop,
y = value)) +
# geom_image(aes(image = emoji)) +
geom_textured_col(aes(
image = emoji
), fill = NA, colour = NA) +
theme_void() +
facet_wrap(~SubCounty, strip.position = "bottom") +
theme(panel.border = element_rect(fill = NA),
plot.margin = unit(5, units = "mm"))
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
# mutate(image = readPNG(paste0(emoji, ".png"))) %>% head()
ggplot(aes(x = crop,
y = value)) +
# geom_image(aes(image = emoji)) +
geom_textured_col(aes(
image = emoji
), fill = NA, colour = NA) +
theme_void() +
facet_wrap(~SubCounty, strip.position = "bottom") +
theme(panel.border = element_rect(fill = NA)) +
labs(title = "hello")
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
# mutate(image = readPNG(paste0(emoji, ".png"))) %>% head()
ggplot(aes(x = crop,
y = value)) +
# geom_image(aes(image = emoji)) +
geom_textured_col(aes(
image = emoji
), fill = NA, colour = NA) +
theme_void() +
# facet_wrap(~SubCounty, strip.position = "bottom") +
theme(panel.border = element_rect(fill = NA)) +
labs(title = "hello")
readycrops <- crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png"))
readycrops %>%
head()
readycrops %>%
ggplot(eas(x = crop, y = value)) +
geom_textured_col(image = emoji), fill = NA, colour = NA))
readycrops %>%
ggplot(eas(x = crop, y = value)) +
geom_textured_col(image = emoji), fill = NA, colour = NA)
readycrops %>%
ggplot(eas(x = crop, y = value)) +
geom_textured_col(aes(image = emoji), fill = NA, colour = NA)
readycrops %>%
ggplot(eas(x = crop, y = value)) +
geom_textured_col(aes(image = emoji), fill = NA, colour = NA)
readycrops %>%
ggplot(aes(x = crop, y = value)) +
geom_textured_col(aes(image = emoji), fill = NA, colour = NA)
readycrops %>%
ggplot(aes(x = crop, y = value)) +
geom_textured_bar(aes(image = emoji), fill = NA, colour = NA)
readycrops %>%
ggplot(aes(x = crop)) +
geom_textured_bar(aes(image = emoji), fill = NA, colour = NA)
readycrops <- crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
group_by(crop, emoji) %>%
summarise(sum(value))
head(readycrops)
readycrops <- crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
group_by(crop, emoji) %>%
summarise(sum = sum(value))
head(readycrops)
readycrops %>%
ggplot(aes(x = crop, y = sum)) +
geom_textured_bar(aes(image = emoji), fill = NA, colour = NA)
readycrops %>%
ggplot(aes(x = crop, y = sum)) +
geom_textured_col(aes(image = emoji), fill = NA, colour = NA)
# readycrops <-
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
group_by(crop, emoji) %>%
summarise(sum = sum(value))
# readycrops <-
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
group_by(crop, emoji) %>% head()
# readycrops <-
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
group_by(crop, emoji) %>%
summarise(sum = sum(value))
# readycrops <-
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
group_by(crop, emoji) %>% head()
install.packages("waffle")
library(waffle)
readycrops %>%
ggplot(aes(fill = crop, values = value)) +
geom_waffle()
readycrops %>%
ggplot(aes(fill = crop, values = value)) +
geom_waffle()
library(waffle)
readycrops %>%
ggplot(aes(fill = crop, values = value)) +
geom_waffle()
install.github("hrbmstr/waffle")
remotes::install_github("hrbrmstr/waffle")
library(waffle)
knitr::opts_chunk$set(echo = TRUE)
library(tidytuesdayR)
library(tidyverse)
tuesdata <- tt_load('2021-01-19')
households <- tuesdata$households
crops <- tuesdata$crops
gender <- tuesdata$gender
households %>% head()
crops %>%
ggplot(aes(x = SubCounty,
y = Farming)) +
geom_col() +
theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5))
crops %>%
filter(SubCounty != "KENYA") %>%
ggplot(aes(x = SubCounty,
y = Farming)) +
geom_col() +
theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.5))
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = "Crop") %>%
ggplot(aes(y = SubCounty,
x = value,
fill = Crop)) +
geom_col() +
# facet_wrap(~Crop) +
theme( legend.position = "") +
theme_classic(base_size = 6)
households %>% head() %>% pull(County)
households <- households %>%
mutate(County = stringr::str_trim(County))
households %>% head() %>%
pull(County)
p1 <- households %>%
# filter(County != "Kenya") %>%
ggplot(aes(x = AverageHouseholdSize,
y = NumberOfHouseholds)) +
geom_point()
p1
library(ggrepel)
p1 + geom_text_repel(aes(label = County))
households %>%
filter(County != "Kenya") %>%
ggplot(aes(x = AverageHouseholdSize,
y = Population)) +
geom_point()
library(emojifont)
cropnames <- colnames(crops)[3:ncol(crops)]
cropnames
# emoji(search_emoji("cocoanut"))
emojicrops <- data.frame(
crop = cropnames,
emoji = c("teapot", "coffee", "avocado", "citrus", "mango", "coconut", "macadamia", "cashew", "khat")
)
library(png)
library(ggimage)
test <- list.files(pattern = ".png")[1]
for(i in 1:nrow(emojicrops)) {
image <- readPNG(paste0(emojicrops$emoji[i], ".png"))
assign(paste0(emojicrops$emoji[i], "_image"), value = image, envir = .GlobalEnv)
}
library(grid)
library(ggtextures)
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
# mutate(image = readPNG(paste0(emoji, ".png"))) %>% head()
ggplot(aes(x = crop,
y = value)) +
# geom_image(aes(image = emoji)) +
geom_textured_col(aes(
image = emoji
), fill = NA, colour = NA) +
theme_void() +
# facet_wrap(~SubCounty, strip.position = "bottom") +
theme(panel.border = element_rect(fill = NA)) +
labs(title = "hello")
# readycrops <-
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
group_by(crop, emoji) %>% head()
summarise(sum = sum(value))
readycrops <-
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
group_by(crop, emoji) %>% head()
readycrops <-
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png")) %>%
group_by(crop, emoji) %>% head()
summarise(sum = sum(value))
# readycrops <-
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = 'crop') %>%
left_join(emojicrops) %>%
mutate(emoji = paste0(emoji, ".png"))
library(waffle)
library(waffle)
readycrops %>%
ggplot(aes(fill = crop, values = value)) +
geom_waffle()
readycrops %>%
ggplot(aes(fill = crop, values = value)) +
geom_waffle(aes(times = value / 100))
readycrops %>% head()
readycrops %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = crop, values = value)) +
geom_waffle(aes(times = value / 100))
crops %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = crop, values = value)) +
geom_waffle(aes(times = value / 100))
crops %>% head()
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = crop, values = value)) +
geom_waffle(aes(times = value / 100))
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = crop, values = value)) +
geom_waffle(aes(times = value / 10000))
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = crop, values = value/1000)) +
geom_waffle()
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = crop, values = value/1000000)) +
geom_waffle()
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = crop, values = value/1000000)) +
geom_waffle()
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = crop, values = value/100000)) +
geom_waffle()
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = crop, values = value/100000)) +
# geom_waffle()
scale_label_pictogram()
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = crop, values = value/10000)) +
geom_waffle(n_rows = 10)
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = SubCounty, values = value/10000)) +
geom_waffle(n_rows = 10) +
facet_wrap(~crop)
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = SubCounty, values = value/10000)) +
geom_waffle(n_rows = 10) +
facet_wrap(~crop) +
theme(legend.position = "bottom")
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = SubCounty, values = value/10000)) +
geom_waffle(n_rows = 10) +
facet_wrap(~crop) +
theme_void() +
theme(legend.position = "bottom")
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = SubCounty, values = value/100000)) +
geom_waffle(n_rows = 10) +
facet_wrap(~crop) +
theme_void() +
theme(legend.position = "bottom")
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = SubCounty, values = value/1000)) +
geom_waffle(n_rows = 10) +
facet_wrap(~crop) +
theme_void() +
theme(legend.position = "bottom")
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = SubCounty, values = value/1000), colour = NA) +
geom_waffle(n_rows = 10) +
facet_wrap(~crop) +
theme_void() +
theme(legend.position = "bottom")
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = SubCounty, values = value/1000), colour = NA) +
geom_waffle(n_rows = 10) +
facet_wrap(~crop) +
theme_void() +
theme(legend.position = "")
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = SubCounty, values = value/50000), colour = NA) +
geom_waffle(n_rows = 10) +
facet_wrap(~crop) +
theme_void() +
theme(legend.position = "")
crops %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = SubCounty, values = value/5000), colour = NA) +
geom_waffle(n_rows = 10) +
facet_wrap(~crop) +
theme_void() +
theme(legend.position = "")
crops %>%
filter(SubCounty != "KENYA")
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = SubCounty, values = value/5000), colour = NA) +
geom_waffle(n_rows = 10) +
facet_wrap(~crop) +
theme_void() +
theme(legend.position = "")
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = SubCounty, values = value/1000), colour = NA) +
geom_waffle(n_rows = 10) +
facet_wrap(~crop) +
theme_void() +
theme(legend.position = "")
crops %>%
filter(SubCounty != "KENYA") %>%
pivot_longer(cols = 3:ncol(crops), names_to = "crop") %>%
filter(!is.na(value)) %>%
ggplot(aes(fill = SubCounty, values = value/1000), colour = NA) +
geom_waffle(n_rows = 10, make_proportional = T) +
facet_wrap(~crop) +
theme_void() +
theme(legend.position = "")
